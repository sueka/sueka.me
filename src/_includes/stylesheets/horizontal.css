/* Keep contrasting with vertical.css */

html {
  writing-mode: horizontal-tb;
  font-kerning: normal;
  font-feature-settings: "palt", "hkna";
  text-align: revert;

  /* Same as MinHeight(rem) to query vertical.css in page.njk */
  @media (min-width: 526px) {
    text-align: justify;
  }
}

body {
  min-block-size: 100vh;
  max-inline-size: 100vh;
  min-inline-size: min(760px, 100vw);
  min-block-size: 100vb;
  max-inline-size: 100vb;
  min-inline-size: min(760px, 100vi); /* ⌈2 * φ³ * 16 + 39 * 16⌉ */
  margin-inline: auto;
}

.title-page {
  min-block-size: 38.196601vw; /* height/width = φ² */
  padding-block: clamp(1.618034rem, 8.923272vh, 4.236068rem);
  padding-inline: clamp(1.618034rem, 8.923272vw, 4.236068rem);
  min-block-size: 38.196601vi; /* height/width = φ² */
  padding-block: clamp(1.618034rem, 8.923272vb, 4.236068rem); /* φ, vb = (2 φ³ rem + 39 rem) * (padding / φ³ rem), φ³ */
  padding-inline: clamp(1.618034rem, 8.923272vi, 4.236068rem); /* φ, vi = (2 φ³ rem + 39 rem) * (padding / φ³ rem), φ³ */
}

.body, .footer {
  padding-block: clamp(1rem, 7.647005vh, 2.618034rem);
  padding-inline: clamp(1.618034rem, 8.923272vw, 4.236068rem);
  padding-block: clamp(1rem, 7.647005vb, 2.618034rem); /* vb = (2 φ² rem + 29 rem) * (padding / φ² rem), φ² */
  padding-inline: clamp(1.618034rem, 8.923272vi, 4.236068rem); /* φ, vi = (2 φ³ rem + 39 rem) * (padding / φ³ rem), φ³ */
}

.footnote-ref,
.footnote-backref {
  @extend .upright;
}

.footnote-ref {
  /* font-feature-settings: revert; */
}

ol {
  list-style-type: revert;
}

b:where(:lang(ja)) {
  @extend .upright;

  font-weight: unset;
  text-emphasis-style: revert;
  text-decoration: underline;
}

.sideways {
  font-feature-settings: revert;
  text-orientation: revert;
}

.upright {
  font-feature-settings: revert;
  text-orientation: revert;
}

.tate-chu-yoko {
  -webkit-text-combine: revert;
  text-combine-upright: revert;
}

.header-anchor {
  @extend .upright;
}

/* Keep contrasting with h# block-axis layout defined in layout.css */
:is(h1, h2, h3, h4, h5, h6):is([id]) /*- :has(.header-anchor) */ {
  scroll-margin-right: 0;
  scroll-margin-left: 0;
  scroll-margin-top: 1.618034em; /* φ */
  scroll-margin-bottom: 1em;
  scroll-margin-block-start: 1.618034em; /* φ */
  scroll-margin-block-end: 1em;
}

.footnote-ref a[id] {
  scroll-margin: 1em 0;
  scroll-margin-block: 1em;
  scroll-margin-inline: 0;
}

.footnotes-list {
  & li:is([id]) {
    scroll-margin: 0.5em 0;
    scroll-margin-block: 0.5em; /* half of (line-height - 1em) */
    scroll-margin-inline: 0;
  }
}
