/* Keep contrasting with vertical.css */

html {
  writing-mode: horizontal-tb;

  font-size: clamp(
    14px,
    min(100vw, 1.4 * 100vh) / (2 * 4.236068 + 39),
    100vh / (2 * 2.618034 + 29)
  );

  font-size: clamp(
    14px,
    min(100vi, 1.4 * 100vb) / (2 * 4.236068 + 39), /* φ³ */
    100vb / (2 * 2.618034 + 29) /* φ² */
  );

  font-kerning: normal;
  font-feature-settings: "hkna";
}

body {
  min-block-size: 100vh;
  min-block-size: 100vb;
  max-inline-size: calc(1.4 * 100vh);
  max-inline-size: calc(1.4 * 100vb);
}

.title-page {
  min-block-size: 38.196601vw;
  min-block-size: 38.196601vi; /* φ⁻²; width/height = φ² */
}

.colophon {
  width: revert;
  max-width: revert;
}

.footnote-ref, .horizontal .footnote-ref, .footnote-ref.horizontal,
.footnote-backref {
  @extend .upright;
}

.footnote-ref, .horizontal .footnote-ref, .footnote-ref.horizontal {
  /* font-feature-settings: revert; */
}

ol, .horizontal ol, ol.horizontal {
  list-style-type: revert;
}

em, .horizontal em, em.horizontal {
  font-style: revert; /* italic */
}

em:where(:lang(ja)),
.horizontal em:where(:lang(ja)),
em:where(:lang(ja)).horizontal {
  font-style: normal;
  font-family: var(--font-text-emphasized);
}

b, .horizontal b, b.horizontal {
  font-weight: unset;
  text-emphasis-style: revert;
  text-decoration: underline;
}

/* mark { See text.css } */

i, .horizontal i, i.horizontal {
  font-style: revert; /* italic */
}

i:where(:lang(ja)),
.horizontal i:where(:lang(ja)),
i:where(:lang(ja)).horizontal {
  font-style: normal;
  font-family: var(--font-text-emphasized);
}

.sideways, .horizontal .sideways, .sideways.horizontal {
  font-feature-settings: revert;
  text-orientation: revert;
}

.upright, .horizontal .upright, .upright.horizontal {
  font-feature-settings: revert;
  text-orientation: revert;
}

.tate-chu-yoko, .horizontal .tate-chu-yoko, .tate-chu-yoko.horizontal {
  -webkit-text-combine: revert;
  text-combine-upright: revert;
}

.header-anchor, .horizontal .header-anchor, .header-anchor.horizontal {
  @extend .upright;
}

/* Keep contrasting with h# block-axis layout defined in layout.css */
:is(h1, h2, h3, h4, h5, h6):is([id]) /*- :has(.header-anchor) */ {
  scroll-margin-right: 0;
  scroll-margin-left: 0;
  scroll-margin-top: 1.618034em; /* φ */
  scroll-margin-bottom: 1em;
  scroll-margin-block-start: 1.618034em; /* φ */
  scroll-margin-block-end: 1em;
}

.footnote-ref a[id] {
  scroll-margin: 1em 0;
  scroll-margin-block: 1em;
  scroll-margin-inline: 0;
}

.horizontal .footnote-ref a[id],
.footnote-ref.horizontal a[id],
.footnote-ref a[id].horizontal {
  scroll-margin: 1em; /* スクロール方向が分からないので四方に同じように取る */
}

.footnotes-list {
  & li:is([id]) {
    scroll-margin: 0.5em 0;
    scroll-margin-block: 0.5em; /* half of (line-height - 1em) */
    scroll-margin-inline: 0;
  }
}

/* .horizontal {
  writing-mode: revert;
} */

/* %revert-class-horizontal {
  writing-mode: revert;
} */

blockquote.horizontal {
  @extend %revert-class-horizontal;

  overflow-y: revert;
  overflow-inline: revert;
}

blockquote.horizontal > p {
  @extend .horizontal;

  leading-trim: revert;
}

.blockquote-like {
  @extend blockquote;
}
